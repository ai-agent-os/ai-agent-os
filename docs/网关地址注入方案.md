# ç½‘å…³åœ°å€æ³¨å…¥æ–¹æ¡ˆ

## ğŸ¯ æ ¸å¿ƒæ€è·¯

**åœ¨ runtime é…ç½®æ–‡ä»¶ä¸­é…ç½®ç½‘å…³åœ°å€ï¼Œå¯åŠ¨å®¹å™¨æ—¶è‡ªåŠ¨æ³¨å…¥åˆ° SDK ç¯å¢ƒå˜é‡ä¸­**

## âœ… å®ç°æ–¹æ¡ˆ

### 1. é…ç½®æ–‡ä»¶ï¼ˆ`configs/app-runtime.yaml`ï¼‰

```yaml
runtime:
  port: 9093
  log_level: "info"
  debug: true
  gateway_url: "http://localhost:9090"  # âœ… ç½‘å…³åœ°å€ï¼ˆä¼šæ³¨å…¥åˆ° SDK å®¹å™¨ä¸­ï¼‰
```

### 2. å¯åŠ¨å®¹å™¨æ—¶è‡ªåŠ¨æ³¨å…¥

```go
// å¯åŠ¨å®¹å™¨æ—¶ï¼Œä» runtime é…ç½®è¯»å–ç½‘å…³åœ°å€å¹¶æ³¨å…¥
gatewayURL := s.runtimeConfig.Runtime.GatewayURL
if gatewayURL == "" {
    gatewayURL = "http://localhost:9090" // é»˜è®¤å€¼
}
envVars = append(envVars, fmt.Sprintf("GATEWAY_URL=%s", gatewayURL))
```

### 3. SDK ä½¿ç”¨

```go
import "github.com/ai-agent-os/ai-agent-os/pkg/serviceconfig"

// SDK è‡ªåŠ¨ä»ç¯å¢ƒå˜é‡è¯»å–ç½‘å…³åœ°å€
gatewayURL := serviceconfig.GetGatewayURL()  // ä» GATEWAY_URL ç¯å¢ƒå˜é‡è¯»å–

// è°ƒç”¨æœåŠ¡
uploadURL := gatewayURL + "/api/v1/storage/upload"
```

## ğŸ“‹ å·¥ä½œæµç¨‹

```
1. Runtime è¯»å–é…ç½®æ–‡ä»¶ app-runtime.yaml
   â†“
2. å¯åŠ¨å®¹å™¨æ—¶ï¼Œä»é…ç½®è¯»å– gateway_url
   â†“
3. æ³¨å…¥ç¯å¢ƒå˜é‡ GATEWAY_URL åˆ°å®¹å™¨ä¸­
   â†“
4. SDK å¯åŠ¨æ—¶ï¼Œä»ç¯å¢ƒå˜é‡è¯»å– GATEWAY_URL
   â†“
5. SDK è°ƒç”¨æœåŠ¡ï¼šgatewayURL + "/api/v1/storage/upload"
```

## ğŸ¯ ä¼˜åŠ¿

1. **é…ç½®é›†ä¸­**ï¼šç½‘å…³åœ°å€åœ¨ runtime é…ç½®æ–‡ä»¶ä¸­ç»Ÿä¸€ç®¡ç†
2. **è‡ªåŠ¨æ³¨å…¥**ï¼šå¯åŠ¨å®¹å™¨æ—¶è‡ªåŠ¨æ³¨å…¥ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®
3. **é›¶é…ç½® SDK**ï¼šSDK åªéœ€è¯»å–ç¯å¢ƒå˜é‡ï¼Œæ— éœ€çŸ¥é“é…ç½®è·¯å¾„
4. **éƒ¨ç½²çµæ´»**ï¼šä¸åŒç¯å¢ƒåªéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶

## ğŸ“Š é…ç½®ç¤ºä¾‹

### å¼€å‘ç¯å¢ƒ

```yaml
runtime:
  gateway_url: "http://localhost:9090"
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆå®¹å™¨åŒ–ï¼‰

```yaml
runtime:
  gateway_url: "http://api-gateway:9090"  # å®¹å™¨å†…ç½‘åœ°å€
```

### ç”Ÿäº§ç¯å¢ƒï¼ˆè·¨æœºå™¨ï¼‰

```yaml
runtime:
  gateway_url: "http://192.168.1.100:9090"  # å®é™…ç½‘å…³åœ°å€
```

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### SDK ä¸­ä¸Šä¼ æ–‡ä»¶

```go
package main

import (
    "github.com/ai-agent-os/ai-agent-os/pkg/serviceconfig"
    "net/http"
)

func uploadFile(filePath string) error {
    // è‡ªåŠ¨ä»ç¯å¢ƒå˜é‡è¯»å–ç½‘å…³åœ°å€
    gatewayURL := serviceconfig.GetGatewayURL()
    
    // æ„å»ºä¸Šä¼  URL
    uploadURL := gatewayURL + "/api/v1/storage/upload"
    
    // è°ƒç”¨ç½‘å…³
    resp, err := http.Post(uploadURL, "multipart/form-data", file)
    // ...
}
```

### Runtime å¯åŠ¨å®¹å™¨

```go
// Runtime å¯åŠ¨å®¹å™¨æ—¶è‡ªåŠ¨æ³¨å…¥
envVars := []string{
    "NATS_URL=nats://host.containers.internal:4223",
    "GATEWAY_URL=http://localhost:9090",  // âœ… ä»é…ç½®è¯»å–å¹¶æ³¨å…¥
}
```

## ğŸ“ æ€»ç»“

**æ–¹æ¡ˆä¼˜åŠ¿**ï¼š
- âœ… é…ç½®é›†ä¸­ç®¡ç†ï¼ˆruntime é…ç½®æ–‡ä»¶ï¼‰
- âœ… è‡ªåŠ¨æ³¨å…¥ï¼ˆå¯åŠ¨å®¹å™¨æ—¶ï¼‰
- âœ… SDK é›¶é…ç½®ï¼ˆåªéœ€è¯»å–ç¯å¢ƒå˜é‡ï¼‰
- âœ… éƒ¨ç½²çµæ´»ï¼ˆä¸åŒç¯å¢ƒåªéœ€ä¿®æ”¹é…ç½®ï¼‰

**é…ç½®å¤æ‚åº¦**ï¼š
- Runtimeï¼šåªéœ€åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ  `gateway_url`
- SDKï¼šæ— éœ€ä»»ä½•é…ç½®ï¼Œè‡ªåŠ¨ä»ç¯å¢ƒå˜é‡è¯»å–

**å®Œç¾è§£å†³äº†"å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹"çš„é—®é¢˜ï¼** ğŸ‰

