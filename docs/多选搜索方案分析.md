# å¤šé€‰æœç´¢æ–¹æ¡ˆåˆ†æ

## é—®é¢˜æè¿°

å¯¹äºå¤šé€‰ç»„ä»¶ï¼ˆmultiselectï¼‰ï¼Œå½“å‰ä½¿ç”¨ `search:"like"` æ ‡ç­¾ï¼Œä½†å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š

- ç”¨æˆ·é€‰æ‹© "é«˜,ä¸­"
- æ•°æ®åº“å­˜å‚¨ "ä¸­,ä½"
- åº”è¯¥åŒ¹é…ï¼ˆå› ä¸ºéƒ½åŒ…å« "ä¸­"ï¼‰
- ä½†å½“å‰ `LIKE '%é«˜,ä¸­%'` æ— æ³•åŒ¹é…

## æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ1ï¼šå¢å¼ºç°æœ‰ `like` é€»è¾‘ï¼ˆæ¨èï¼‰

**å®ç°æ–¹å¼**ï¼š
- å½“ `like` å€¼åŒ…å«é€—å·æ—¶ï¼Œè‡ªåŠ¨æ‹†åˆ†ä¸ºå¤šä¸ª OR æ¡ä»¶
- ä¾‹å¦‚ï¼š`tags LIKE '%é«˜%' OR tags LIKE '%ä¸­%'`

**ä¼˜ç‚¹**ï¼š
- âœ… ä¸éœ€è¦æ–°å¢æ ‡ç­¾ï¼Œå‘åå…¼å®¹
- âœ… å®ç°ç®€å•ï¼Œåªéœ€ä¿®æ”¹åç«¯é€»è¾‘
- âœ… å¯¹äºå¤šé€‰åœºæ™¯ï¼Œ`like` è¯­ä¹‰ä¸Šå°±æ˜¯"åŒ…å«"çš„æ„æ€

**ç¼ºç‚¹**ï¼š
- âš ï¸ `LIKE '%value%'` å¯èƒ½è¯¯åŒ¹é…ï¼ˆå¦‚ "é«˜ä¼˜å…ˆçº§" ä¼šåŒ¹é… "é«˜"ï¼‰
- âš ï¸ æ€§èƒ½å¯èƒ½ä¸å¦‚ `FIND_IN_SET`

**é€‚ç”¨åœºæ™¯**ï¼š
- é€‰é¡¹å€¼ä¸ä¼šç›¸äº’åŒ…å«ï¼ˆå¦‚ "é«˜" ä¸ä¼šå‡ºç°åœ¨ "é«˜ä¼˜å…ˆçº§" ä¸­ï¼‰
- å¯¹æ€§èƒ½è¦æ±‚ä¸æ˜¯ç‰¹åˆ«é«˜

### æ–¹æ¡ˆ2ï¼šæ–°å¢æœç´¢æ ‡ç­¾ `contains`

**å®ç°æ–¹å¼**ï¼š
- æ–°å¢ `search:"contains"` æ ‡ç­¾
- ä½¿ç”¨ MySQL çš„ `FIND_IN_SET` å‡½æ•°
- ä¾‹å¦‚ï¼š`FIND_IN_SET('é«˜', tags) OR FIND_IN_SET('ä¸­', tags)`

**ä¼˜ç‚¹**ï¼š
- âœ… ç²¾ç¡®åŒ¹é…ï¼Œä¸ä¼šè¯¯åŒ¹é…
- âœ… æ€§èƒ½æ›´å¥½ï¼ˆ`FIND_IN_SET` æ˜¯ MySQL åŸç”Ÿå‡½æ•°ï¼‰
- âœ… è¯­ä¹‰æ¸…æ™°ï¼Œä¸“é—¨ç”¨äºå¤šé€‰åœºæ™¯

**ç¼ºç‚¹**ï¼š
- âš ï¸ éœ€è¦æ–°å¢æ ‡ç­¾ï¼Œå¢åŠ å¤æ‚åº¦
- âš ï¸ éœ€è¦ä¿®æ”¹å‰ç«¯å’Œåç«¯ä»£ç 

**é€‚ç”¨åœºæ™¯**ï¼š
- é€‰é¡¹å€¼å¯èƒ½ç›¸äº’åŒ…å«ï¼ˆå¦‚ "é«˜" å’Œ "é«˜ä¼˜å…ˆçº§"ï¼‰
- å¯¹æ€§èƒ½è¦æ±‚è¾ƒé«˜
- éœ€è¦ç²¾ç¡®åŒ¹é…

### æ–¹æ¡ˆ3ï¼šæ–°å¢æœç´¢æ ‡ç­¾ `find_in_set`

**å®ç°æ–¹å¼**ï¼š
- æ–°å¢ `search:"find_in_set"` æ ‡ç­¾
- ç›´æ¥ä½¿ç”¨ MySQL çš„ `FIND_IN_SET` å‡½æ•°
- ä¸æ–¹æ¡ˆ2ç±»ä¼¼ï¼Œä½†æ ‡ç­¾åæ›´æŠ€æœ¯åŒ–

**ä¼˜ç‚¹**ï¼š
- âœ… ä¸æ–¹æ¡ˆ2ç›¸åŒ

**ç¼ºç‚¹**ï¼š
- âš ï¸ æ ‡ç­¾åæŠ€æœ¯åŒ–ï¼Œä¸å¤Ÿè¯­ä¹‰åŒ–
- âš ï¸ éœ€è¦æ–°å¢æ ‡ç­¾

## æ¨èæ–¹æ¡ˆ

**æ¨èä½¿ç”¨æ–¹æ¡ˆ1ï¼ˆå¢å¼ºç°æœ‰ `like` é€»è¾‘ï¼‰**ï¼ŒåŸå› ï¼š

1. **å‘åå…¼å®¹**ï¼šä¸éœ€è¦ä¿®æ”¹ç°æœ‰ä»£ç ï¼Œåªéœ€å¢å¼ºåç«¯é€»è¾‘
2. **å®ç°ç®€å•**ï¼šåªéœ€ä¿®æ”¹ `pkg/gormx/query/query1.go` ä¸­çš„ `like` å¤„ç†é€»è¾‘
3. **è¯­ä¹‰åˆç†**ï¼šå¯¹äºå¤šé€‰åœºæ™¯ï¼Œ`like` å°±æ˜¯"åŒ…å«"çš„æ„æ€
4. **é€‚ç”¨æ€§å¼º**ï¼šå¯¹äºå¤§å¤šæ•°åœºæ™¯ï¼Œé€‰é¡¹å€¼ä¸ä¼šç›¸äº’åŒ…å«

**å¦‚æœé€‰é¡¹å€¼å¯èƒ½ç›¸äº’åŒ…å«ï¼Œå»ºè®®ä½¿ç”¨æ–¹æ¡ˆ2ï¼ˆæ–°å¢ `contains` æ ‡ç­¾ï¼‰**

## å®ç°å»ºè®®

### æ–¹æ¡ˆ1å®ç°ï¼ˆå¢å¼º `like` é€»è¾‘ï¼‰

ä¿®æ”¹ `pkg/gormx/query/query1.go`ï¼š

```go
// å¯¹äº like å’Œ not_like æ“ä½œç¬¦ï¼Œå§‹ç»ˆä½¿ç”¨å­—ç¬¦ä¸²æ¯”è¾ƒ
if operator == "like" || operator == "not_like" {
    // ğŸ”¥ å¦‚æœå€¼åŒ…å«é€—å·ï¼Œæ‹†åˆ†ä¸ºå¤šä¸ª OR æ¡ä»¶ï¼ˆç”¨äºå¤šé€‰åœºæ™¯ï¼‰
    if strings.Contains(value, ",") {
        values := strings.Split(value, ",")
        var conditions []string
        for _, v := range values {
            v = strings.TrimSpace(v)
            if v != "" {
                if operator == "like" {
                    conditions = append(conditions, SafeColumnName(field)+" LIKE ?")
                } else {
                    conditions = append(conditions, SafeColumnName(field)+" NOT LIKE ?")
                }
            }
        }
        if len(conditions) > 0 {
            query := "(" + strings.Join(conditions, " OR ") + ")"
            var args []interface{}
            for _, v := range values {
                v = strings.TrimSpace(v)
                if v != "" {
                    args = append(args, "%"+v+"%")
                }
            }
            *db = (*db).Where(query, args...)
        }
    } else {
        // å•ä¸ªå€¼ï¼Œä½¿ç”¨åŸæœ‰é€»è¾‘
        switch operator {
        case "like":
            *db = (*db).Where(SafeColumnName(field)+" LIKE ?", "%"+value+"%")
        case "not_like":
            *db = (*db).Where(SafeColumnName(field)+" NOT LIKE ?", "%"+value+"%")
        }
    }
}
```

### æ–¹æ¡ˆ2å®ç°ï¼ˆæ–°å¢ `contains` æ ‡ç­¾ï¼‰

1. ä¿®æ”¹ `pkg/gormx/query/query1.go`ï¼Œæ·»åŠ  `contains` æ“ä½œç¬¦å¤„ç†
2. ä¿®æ”¹å‰ç«¯ `SearchInput.vue`ï¼Œæ”¯æŒ `contains` æœç´¢ç±»å‹
3. ä¿®æ”¹ `buildSearchParamsString` å’Œ `buildURLSearchParams`ï¼Œæ”¯æŒ `contains` å‚æ•°

## æ€»ç»“

- **æ¨èæ–¹æ¡ˆ1**ï¼šç®€å•ã€å‘åå…¼å®¹ã€é€‚ç”¨å¤§å¤šæ•°åœºæ™¯
- **å¤‡é€‰æ–¹æ¡ˆ2**ï¼šå¦‚æœéœ€è¦ç²¾ç¡®åŒ¹é…æˆ–æ€§èƒ½è¦æ±‚é«˜

