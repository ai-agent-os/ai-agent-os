# æœåŠ¡åœ°å€å‘ç°æ–¹æ¡ˆ - ç®€åŒ–ç‰ˆ

## ğŸ¯ æ ¸å¿ƒæ€è·¯

**åªéœ€è¦çŸ¥é“ç½‘å…³åœ°å€ï¼Œæ‰€æœ‰æœåŠ¡éƒ½é€šè¿‡ç½‘å…³è®¿é—®ï¼**

## âœ… ç®€åŒ–æ–¹æ¡ˆ

### é…ç½®æ–¹å¼

```bash
# ç”Ÿäº§ç¯å¢ƒï¼šåªéœ€ä¸€ä¸ªç¯å¢ƒå˜é‡
export GATEWAY_URL=http://api-gateway:9090

# å¼€å‘ç¯å¢ƒï¼šæ— éœ€é…ç½®ï¼ˆä½¿ç”¨é»˜è®¤å€¼ http://localhost:9090ï¼‰
```

### SDK ä½¿ç”¨

```go
import "github.com/ai-agent-os/ai-agent-os/pkg/serviceconfig"

// æ–¹å¼ 1ï¼šè·å–ç½‘å…³åœ°å€ï¼Œç„¶åæ‹¼æ¥è·¯å¾„
gatewayURL := serviceconfig.GetGatewayURL()
uploadURL := gatewayURL + "/api/v1/storage/upload"

// æ–¹å¼ 2ï¼šä½¿ç”¨ä¾¿æ·æ–¹æ³•
storageURL := serviceconfig.GetStorageURL()  // http://localhost:9090/api/v1/storage
uploadURL := storageURL + "/upload"

// æ–¹å¼ 3ï¼šç›´æ¥æ„å»ºå®Œæ•´ URL
uploadURL := serviceconfig.BuildServiceURL(gatewayURL, "/api/v1/storage/upload")
```

## ğŸ“‹ æœåŠ¡è·¯å¾„æ˜ å°„

æ‰€æœ‰æœåŠ¡éƒ½é€šè¿‡ç½‘å…³è®¿é—®ï¼Œè·¯å¾„å¦‚ä¸‹ï¼š

| æœåŠ¡ | ç½‘å…³è·¯å¾„ | ç¤ºä¾‹ |
|------|---------|------|
| å­˜å‚¨æœåŠ¡ | `/api/v1/storage/*` | `http://localhost:9090/api/v1/storage/upload` |
| ä¸»æœåŠ¡ | `/api/*` | `http://localhost:9090/api/v1/app/list` |
| é…ç½®æ¥å£ | `/api/v1/config` | `http://localhost:9090/api/v1/config` |

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šä¸Šä¼ æ–‡ä»¶

```go
package main

import (
    "github.com/ai-agent-os/ai-agent-os/pkg/serviceconfig"
    "net/http"
)

func uploadFile(filePath string) error {
    // è·å–å­˜å‚¨æœåŠ¡åœ°å€
    gatewayURL := serviceconfig.GetGatewayURL()
    uploadURL := gatewayURL + "/api/v1/storage/upload"
    
    // ä¸Šä¼ æ–‡ä»¶
    resp, err := http.Post(uploadURL, "multipart/form-data", file)
    // ...
}
```

### ç¤ºä¾‹ 2ï¼šè°ƒç”¨ä¸»æœåŠ¡

```go
func getAppList() error {
    gatewayURL := serviceconfig.GetGatewayURL()
    listURL := gatewayURL + "/api/v1/app/list"
    
    resp, err := http.Get(listURL)
    // ...
}
```

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | é…ç½®å¤æ‚åº¦ | éœ€è¦é…ç½®æ¥å£ | æ¨èåº¦ |
|------|-----------|------------|--------|
| **ç®€åŒ–ç‰ˆ**ï¼ˆå½“å‰ï¼‰ | â­ | âŒ ä¸éœ€è¦ | â­â­â­â­â­ |
| å®Œæ•´ç‰ˆï¼ˆå¸¦é…ç½®æ¥å£ï¼‰ | â­â­ | âœ… éœ€è¦ | â­â­â­ |

## ğŸ’¡ ä¼˜åŠ¿

1. **æç®€é…ç½®**ï¼šåªéœ€ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼ˆæˆ–ä½¿ç”¨é»˜è®¤å€¼ï¼‰
2. **æ— éœ€ç½‘ç»œè¯·æ±‚**ï¼šå¯åŠ¨æ—¶ä¸éœ€è¦è°ƒç”¨é…ç½®æ¥å£
3. **ç»Ÿä¸€å…¥å£**ï¼šæ‰€æœ‰æœåŠ¡éƒ½é€šè¿‡ç½‘å…³ï¼Œä¾¿äºç®¡ç†
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šç½‘å…³æ”¯æŒè´Ÿè½½å‡è¡¡ã€ç¼“å­˜ç­‰

## ğŸ”„ å¦‚æœä»¥åéœ€è¦ direct_url

å¦‚æœå°†æ¥éœ€è¦ SDK å†…éƒ¨ç›´æ¥è°ƒç”¨æœåŠ¡ï¼ˆç»•è¿‡ç½‘å…³ï¼‰ï¼Œå¯ä»¥ï¼š

1. **ä¿ç•™é…ç½®æ¥å£**ï¼šç½‘å…³çš„ `/api/v1/config` æ¥å£ä»ç„¶å¯ç”¨
2. **æ‰©å±• serviceconfig**ï¼šæ·»åŠ  `GetDirectURL()` æ–¹æ³•
3. **å‘åå…¼å®¹**ï¼šç°æœ‰ä»£ç ç»§ç»­ä½¿ç”¨ç½‘å…³åœ°å€

## ğŸ“ æ€»ç»“

**ç®€åŒ–ç‰ˆæ–¹æ¡ˆ**ï¼š
- âœ… åªéœ€çŸ¥é“ç½‘å…³åœ°å€
- âœ… æ‰€æœ‰æœåŠ¡é€šè¿‡ç½‘å…³è®¿é—®
- âœ… é…ç½®ç®€å•ï¼Œæ— éœ€ç½‘ç»œè¯·æ±‚
- âœ… é€‚åˆå½“å‰åœºæ™¯

**å¦‚æœæœªæ¥éœ€è¦**ï¼š
- å¯ä»¥æ‰©å±•æ”¯æŒ direct_url
- å¯ä»¥æ·»åŠ é…ç½®æ¥å£è°ƒç”¨
- ä¿æŒå‘åå…¼å®¹

