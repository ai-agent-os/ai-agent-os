# Widget ç»„ä»¶åŒ–é‡æ„å®æ–½è®¡åˆ’

## ä¸€ã€é‡æ„åŸåˆ™

### 1.1 æ ¸å¿ƒåŸåˆ™

1. **å®Œå…¨æ–°å¢**ï¼šæ‰€æœ‰æ–°ä»£ç éƒ½æ˜¯æ–°å¢çš„ï¼Œä¸ä¿®æ”¹æ—§ä»£ç 
2. **ä¸åˆ é™¤æ—§ä»£ç **ï¼šä¿ç•™æ‰€æœ‰æ—§ä»£ç ï¼Œæ–°ä»£ç ä¸æ—§ä»£ç å¹¶å­˜
3. **ä¸ä¾èµ–æ—§ä»£ç **ï¼šæ–°ä»£ç ä¸å¼•ç”¨æ—§ä»£ç ï¼Œå®Œå…¨ç‹¬ç«‹
4. **æ¸è¿›å¼è¿ç§»**ï¼šå¯ä»¥é€æ­¥è¿ç§»ï¼Œæ–°æ—§ä»£ç å¯ä»¥å¹¶å­˜

### 1.2 æ–‡ä»¶ç»„ç»‡

```
web/src/core/
  â”œâ”€ widgets/              # æ—§ä»£ç ï¼ˆä¿ç•™ï¼‰
  â”‚   â”œâ”€ BaseWidget.ts
  â”‚   â”œâ”€ TableWidget.ts
  â”‚   â””â”€ ...
  â”‚
  â”œâ”€ widgets-v2/           # æ–°ä»£ç ï¼ˆå®Œå…¨æ–°å¢ï¼‰
  â”‚   â”œâ”€ components/       # Vue ç»„ä»¶
  â”‚   â”‚   â”œâ”€ InputWidget.vue
  â”‚   â”‚   â”œâ”€ TableWidget.vue
  â”‚   â”‚   â””â”€ ...
  â”‚   â”œâ”€ composables/      # ç»„åˆå¼å‡½æ•°
  â”‚   â”‚   â”œâ”€ useTableWidget.ts
  â”‚   â”‚   â”œâ”€ useFormWidget.ts
  â”‚   â”‚   â””â”€ ...
  â”‚   â””â”€ types.ts          # ç±»å‹å®šä¹‰
  â”‚
  â”œâ”€ stores-v2/            # æ–° Storeï¼ˆå®Œå…¨æ–°å¢ï¼‰
  â”‚   â”œâ”€ formData.ts
  â”‚   â””â”€ responseData.ts
  â”‚
  â”œâ”€ factories-v2/         # æ–°å·¥å‚ï¼ˆå®Œå…¨æ–°å¢ï¼‰
  â”‚   â””â”€ WidgetComponentFactory.ts
  â”‚
  â””â”€ renderers-v2/         # æ–°æ¸²æŸ“å™¨ï¼ˆå®Œå…¨æ–°å¢ï¼‰
      â””â”€ FormRenderer.vue
```

## äºŒã€å®æ–½é˜¶æ®µ

### é˜¶æ®µ1: åŸºç¡€è®¾æ–½æ­å»ºï¼ˆ1-2å¤©ï¼‰

#### 1.1 åˆ›å»ºç±»å‹å®šä¹‰

**ç›®æ ‡**ï¼šå®šä¹‰ç»Ÿä¸€çš„ Props æ¥å£å’Œç±»å‹

**æ–‡ä»¶**ï¼š`web/src/core/widgets-v2/types.ts`

**å†…å®¹**ï¼š
- `WidgetComponentProps` æ¥å£
- `WidgetMode` ç±»å‹
- å…¶ä»–å¿…è¦çš„ç±»å‹å®šä¹‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… ç±»å‹å®šä¹‰å®Œæ•´
- âœ… æ‰€æœ‰ç»„ä»¶å¯ä»¥ä½¿ç”¨ç»Ÿä¸€çš„ Props
- âœ… TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡

#### 1.2 åˆ›å»º Pinia Store

**ç›®æ ‡**ï¼šåˆ›å»ºè¡¨å•æ•°æ®å’Œå“åº”æ•°æ®çš„ Store

**æ–‡ä»¶**ï¼š
- `web/src/core/stores-v2/formData.ts`
- `web/src/core/stores-v2/responseData.ts`

**åŠŸèƒ½**ï¼š
- è¡¨å•æ•°æ®å­˜å‚¨å’Œè¯»å–
- å“åº”æ•°æ®å­˜å‚¨å’Œè¯»å–
- æäº¤æ•°æ®æå–ï¼ˆé€’å½’ï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… Store å¯ä»¥æ­£å¸¸åˆ›å»ºå’Œä½¿ç”¨
- âœ… æ•°æ®å¯ä»¥æ­£å¸¸å­˜å‚¨å’Œè¯»å–
- âœ… æäº¤æ•°æ®æå–åŠŸèƒ½æ­£å¸¸

#### 1.3 åˆ›å»ºç»„ä»¶å·¥å‚

**ç›®æ ‡**ï¼šåˆ›å»ºç»„ä»¶å·¥å‚ï¼Œæ”¯æŒåŠ¨æ€ç»„ä»¶æ³¨å†Œ

**æ–‡ä»¶**ï¼š`web/src/core/factories-v2/WidgetComponentFactory.ts`

**åŠŸèƒ½**ï¼š
- æ³¨å†Œè¯·æ±‚å‚æ•°ç»„ä»¶
- æ³¨å†Œå“åº”å‚æ•°ç»„ä»¶
- è·å–ç»„ä»¶ï¼ˆæ ¹æ® widget.typeï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… å¯ä»¥æ³¨å†Œç»„ä»¶
- âœ… å¯ä»¥æ ¹æ®ç±»å‹è·å–ç»„ä»¶
- âœ… æ”¯æŒåŠ¨æ€ç»„ä»¶æ¸²æŸ“

### é˜¶æ®µ2: åŸºç¡€ç»„ä»¶å®ç°ï¼ˆ3-5å¤©ï¼‰

#### 2.1 å®ç° InputWidget ç»„ä»¶

**ç›®æ ‡**ï¼šå®ç°æœ€åŸºç¡€çš„è¾“å…¥ç»„ä»¶

**æ–‡ä»¶**ï¼š`web/src/core/widgets-v2/components/InputWidget.vue`

**åŠŸèƒ½**ï¼š
- æ”¯æŒ `mode="edit"` - å¯ç¼–è¾‘è¾“å…¥
- æ”¯æŒ `mode="response"` - åªè¯»å±•ç¤º
- æ”¯æŒ `mode="table-cell"` - è¡¨æ ¼å•å…ƒæ ¼
- æ”¯æŒ `mode="detail"` - è¯¦æƒ…å±•ç¤º
- æ”¯æŒ `mode="search"` - æœç´¢è¾“å…¥

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… æ‰€æœ‰ mode éƒ½èƒ½æ­£å¸¸å·¥ä½œ
- âœ… æ•°æ®å¯ä»¥æ­£å¸¸åŒå‘ç»‘å®š
- âœ… å¯ä»¥æ­£å¸¸æäº¤æ•°æ®

#### 2.2 å®ç° SelectWidget ç»„ä»¶

**ç›®æ ‡**ï¼šå®ç°é€‰æ‹©å™¨ç»„ä»¶

**æ–‡ä»¶**ï¼š`web/src/core/widgets-v2/components/SelectWidget.vue`

**åŠŸèƒ½**ï¼š
- æ”¯æŒæ‰€æœ‰ mode
- æ”¯æŒå›è°ƒæ¥å£ï¼ˆfuzzy searchï¼‰
- æ”¯æŒé€‰é¡¹æ˜¾ç¤ºä¿¡æ¯ï¼ˆdisplay_infoï¼‰

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… æ‰€æœ‰ mode éƒ½èƒ½æ­£å¸¸å·¥ä½œ
- âœ… å›è°ƒæ¥å£å¯ä»¥æ­£å¸¸è°ƒç”¨
- âœ… é€‰é¡¹æ˜¾ç¤ºæ­£å¸¸

#### 2.3 å®ç°å…¶ä»–åŸºç¡€ç»„ä»¶

**ç›®æ ‡**ï¼šå®ç°å…¶ä»–åŸºç¡€ç»„ä»¶

**ç»„ä»¶åˆ—è¡¨**ï¼š
- `NumberWidget.vue`
- `FloatWidget.vue`
- `TextAreaWidget.vue`
- `SwitchWidget.vue`
- `TimestampWidget.vue`
- `FilesWidget.vue`

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… æ‰€æœ‰ç»„ä»¶éƒ½èƒ½æ­£å¸¸å·¥ä½œ
- âœ… æ•°æ®å¯ä»¥æ­£å¸¸æäº¤

### é˜¶æ®µ3: å®¹å™¨ç»„ä»¶å®ç°ï¼ˆ5-7å¤©ï¼‰

#### 3.1 å®ç° FormWidget ç»„ä»¶

**ç›®æ ‡**ï¼šå®ç°è¡¨å•å®¹å™¨ç»„ä»¶

**æ–‡ä»¶**ï¼š`web/src/core/widgets-v2/components/FormWidget.vue`

**åŠŸèƒ½**ï¼š
- æ”¯æŒ `mode="edit"` - å¯ç¼–è¾‘è¡¨å•
- æ”¯æŒ `mode="response"` - åªè¯»è¡¨å•
- é€’å½’æ¸²æŸ“å­ç»„ä»¶
- æ”¯æŒæ¡ä»¶æ¸²æŸ“

**ç»„åˆå¼å‡½æ•°**ï¼š
- `useFormWidget.ts` - æå–å…±äº«é€»è¾‘

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… å¯ä»¥é€’å½’æ¸²æŸ“å­ç»„ä»¶
- âœ… æ”¯æŒæ·±å±‚åµŒå¥—
- âœ… æ¡ä»¶æ¸²æŸ“æ­£å¸¸å·¥ä½œ
- âœ… æ•°æ®å¯ä»¥æ­£å¸¸æäº¤

#### 3.2 å®ç° TableWidget ç»„ä»¶

**ç›®æ ‡**ï¼šå®ç°è¡¨æ ¼å®¹å™¨ç»„ä»¶

**æ–‡ä»¶**ï¼š`web/src/core/widgets-v2/components/TableWidget.vue`

**åŠŸèƒ½**ï¼š
- æ”¯æŒ `mode="edit"` - å¯ç¼–è¾‘è¡¨æ ¼ï¼ˆæ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤ï¼‰
- æ”¯æŒ `mode="response"` - åªè¯»è¡¨æ ¼
- æ”¯æŒ `mode="table-cell"` - è¡¨æ ¼å•å…ƒæ ¼
- èšåˆè®¡ç®—ï¼ˆä½¿ç”¨ computedï¼‰
- è¯¦æƒ…æŠ½å±‰

**ç»„åˆå¼å‡½æ•°**ï¼š
- `useTableWidget.ts` - å…±äº«é€»è¾‘
- `useTableEditMode.ts` - ç¼–è¾‘æ¨¡å¼é€»è¾‘
- `useTableResponseMode.ts` - å“åº”æ¨¡å¼é€»è¾‘

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… æ‰€æœ‰ mode éƒ½èƒ½æ­£å¸¸å·¥ä½œ
- âœ… èšåˆè®¡ç®—æ­£å¸¸
- âœ… è¯¦æƒ…æŠ½å±‰æ­£å¸¸
- âœ… æ•°æ®å¯ä»¥æ­£å¸¸æäº¤

### é˜¶æ®µ4: æ¸²æŸ“å™¨å®ç°ï¼ˆ2-3å¤©ï¼‰

#### 4.1 å®ç° FormRenderer ç»„ä»¶

**ç›®æ ‡**ï¼šå®ç°æ–°çš„è¡¨å•æ¸²æŸ“å™¨

**æ–‡ä»¶**ï¼š`web/src/core/renderers-v2/FormRenderer.vue`

**åŠŸèƒ½**ï¼š
- æ¸²æŸ“è¯·æ±‚å‚æ•°å­—æ®µ
- æ¸²æŸ“å“åº”å‚æ•°å­—æ®µ
- æ¡ä»¶æ¸²æŸ“æ”¯æŒ
- è¡¨å•éªŒè¯
- è¡¨å•æäº¤

**éªŒæ”¶æ ‡å‡†**ï¼š
- âœ… å¯ä»¥æ­£å¸¸æ¸²æŸ“æ‰€æœ‰å­—æ®µ
- âœ… æ¡ä»¶æ¸²æŸ“æ­£å¸¸å·¥ä½œ
- âœ… è¡¨å•éªŒè¯æ­£å¸¸
- âœ… è¡¨å•æäº¤æ­£å¸¸

### é˜¶æ®µ5: é›†æˆæµ‹è¯•ï¼ˆ2-3å¤©ï¼‰

#### 5.1 åŠŸèƒ½æµ‹è¯•

**æµ‹è¯•å†…å®¹**ï¼š
- åŸºç¡€ç»„ä»¶åŠŸèƒ½
- å®¹å™¨ç»„ä»¶åŠŸèƒ½
- åµŒå¥—åœºæ™¯
- æ¡ä»¶æ¸²æŸ“
- èšåˆè®¡ç®—
- è¡¨å•æäº¤

#### 5.2 æ€§èƒ½æµ‹è¯•

**æµ‹è¯•å†…å®¹**ï¼š
- æ¸²æŸ“æ€§èƒ½
- æ•°æ®æ›´æ–°æ€§èƒ½
- å¤æ‚ç»„ä»¶æ ‘æ€§èƒ½

#### 5.3 å…¼å®¹æ€§æµ‹è¯•

**æµ‹è¯•å†…å®¹**ï¼š
- ä¸åŒæµè§ˆå™¨
- ä¸åŒæ•°æ®æ ¼å¼
- è¾¹ç•Œæƒ…å†µ

## ä¸‰ã€è¯¦ç»†å®æ–½æ­¥éª¤

### æ­¥éª¤1: åˆ›å»ºç›®å½•ç»“æ„

```bash
mkdir -p web/src/core/widgets-v2/components
mkdir -p web/src/core/widgets-v2/composables
mkdir -p web/src/core/stores-v2
mkdir -p web/src/core/factories-v2
mkdir -p web/src/core/renderers-v2
```

### æ­¥éª¤2: åˆ›å»ºç±»å‹å®šä¹‰

**æ–‡ä»¶**ï¼š`web/src/core/widgets-v2/types.ts`

```typescript
import type { FieldConfig, FieldValue } from '../../types/field'
import type { ReactiveFormDataManager, FormRendererContext } from '../types/widget'

export type WidgetMode = 'edit' | 'response' | 'table-cell' | 'detail' | 'search'

export interface WidgetComponentProps {
  // å¿…éœ€å±æ€§
  field: FieldConfig
  value: FieldValue
  mode: WidgetMode
  fieldPath: string
  
  // å¯é€‰å±æ€§
  formManager?: ReactiveFormDataManager | null
  formRenderer?: FormRendererContext | null
  depth?: number
  
  // åœºæ™¯ç‰¹å®šå±æ€§
  searchType?: string
  rowData?: any
  rowIndex?: number
}
```

### æ­¥éª¤3: åˆ›å»º Pinia Store

**æ–‡ä»¶**ï¼š`web/src/core/stores-v2/formData.ts`

```typescript
import { defineStore } from 'pinia'
import { reactive } from 'vue'
import type { FieldConfig, FieldValue } from '../../types/field'

export const useFormDataStore = defineStore('formData', () => {
  const data = reactive<Map<string, FieldValue>>(new Map())
  
  function setValue(fieldPath: string, value: FieldValue) {
    data.set(fieldPath, value)
  }
  
  function getValue(fieldPath: string): FieldValue {
    return data.get(fieldPath) || { raw: null, display: '', meta: {} }
  }
  
  function getSubmitData(fields: FieldConfig[], basePath: string = ''): Record<string, any> {
    // é€’å½’æå–æäº¤æ•°æ®
    // ...
  }
  
  return {
    data,
    setValue,
    getValue,
    getSubmitData
  }
})
```

### æ­¥éª¤4: åˆ›å»ºç»„ä»¶å·¥å‚

**æ–‡ä»¶**ï¼š`web/src/core/factories-v2/WidgetComponentFactory.ts`

```typescript
import type { Component } from 'vue'

export class WidgetComponentFactory {
  private requestComponentMap: Map<string, Component> = new Map()
  private responseComponentMap: Map<string, Component> = new Map()
  
  registerRequestComponent(type: string, component: Component): void {
    this.requestComponentMap.set(type, component)
  }
  
  registerResponseComponent(type: string, component: Component): void {
    this.responseComponentMap.set(type, component)
  }
  
  getRequestComponent(type: string): Component {
    return this.requestComponentMap.get(type) || InputWidgetComponent
  }
  
  getResponseComponent(type: string): Component {
    return this.responseComponentMap.get(type) || this.getRequestComponent(type)
  }
}

export const widgetComponentFactory = new WidgetComponentFactory()
```

### æ­¥éª¤5: å®ç°åŸºç¡€ç»„ä»¶

**æ–‡ä»¶**ï¼š`web/src/core/widgets-v2/components/InputWidget.vue`

```vue
<template>
  <div class="input-widget">
    <el-input
      v-if="mode === 'edit'"
      v-model="internalValue"
      :disabled="field.widget?.config?.disabled"
      :placeholder="field.desc"
    />
    <span v-else-if="mode === 'response'">
      {{ displayValue }}
    </span>
    <!-- å…¶ä»– mode ... -->
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import type { WidgetComponentProps } from '../types'
import { useFormDataStore } from '../../stores-v2/formData'

const props = defineProps<WidgetComponentProps>()
const emit = defineEmits<{
  'update:modelValue': [value: FieldValue]
}>()

const formDataStore = useFormDataStore()

const internalValue = computed({
  get: () => props.value?.raw || '',
  set: (newValue) => {
    const newFieldValue: FieldValue = {
      raw: newValue,
      display: String(newValue),
      meta: {}
    }
    formDataStore.setValue(props.fieldPath, newFieldValue)
    emit('update:modelValue', newFieldValue)
  }
})
</script>
```

### æ­¥éª¤6: å®ç°å®¹å™¨ç»„ä»¶

**æ–‡ä»¶**ï¼š`web/src/core/widgets-v2/components/TableWidget.vue`

```vue
<template>
  <div class="table-widget">
    <template v-if="mode === 'edit'">
      <!-- å¯ç¼–è¾‘è¡¨æ ¼ -->
    </template>
    <template v-else-if="mode === 'response'">
      <!-- åªè¯»è¡¨æ ¼ -->
    </template>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import type { WidgetComponentProps } from '../types'
import { useTableWidget } from '../composables/useTableWidget'
import { useTableEditMode } from '../composables/useTableEditMode'
import { useTableResponseMode } from '../composables/useTableResponseMode'

const props = defineProps<WidgetComponentProps>()

const { tableData, fields } = useTableWidget(props)
const editMode = useTableEditMode(props)
const responseMode = useTableResponseMode(props)
</script>
```

### æ­¥éª¤7: å®ç°æ¸²æŸ“å™¨

**æ–‡ä»¶**ï¼š`web/src/core/renderers-v2/FormRenderer.vue`

```vue
<template>
  <div class="form-renderer">
    <!-- è¯·æ±‚å‚æ•° -->
    <el-form>
      <el-form-item
        v-for="field in visibleFields"
        :key="field.code"
        :label="field.name"
      >
        <component
          :is="getRequestComponent(field.widget?.type || 'input')"
          :field="field"
          :model-value="formDataStore.getValue(field.code)"
          @update:model-value="(v) => formDataStore.setValue(field.code, v)"
          :field-path="field.code"
          mode="edit"
        />
      </el-form-item>
    </el-form>
    
    <!-- å“åº”å‚æ•° -->
    <el-form>
      <el-form-item
        v-for="field in responseFields"
        :key="field.code"
        :label="field.name"
      >
        <component
          :is="getResponseComponent(field.widget?.type || 'input')"
          :field="field"
          :model-value="responseDataStore.data?.[field.code]"
          :field-path="field.code"
          mode="response"
        />
      </el-form-item>
    </el-form>
  </div>
</template>

<script setup lang="ts">
import { computed } from 'vue'
import { widgetComponentFactory } from '../factories-v2/WidgetComponentFactory'
import { useFormDataStore } from '../stores-v2/formData'
import { useResponseDataStore } from '../stores-v2/responseData'

const props = defineProps<{
  functionDetail: FunctionDetail
}>()

const formDataStore = useFormDataStore()
const responseDataStore = useResponseDataStore()

const visibleFields = computed(() => {
  // æ¡ä»¶æ¸²æŸ“è¿‡æ»¤
})

function getRequestComponent(type: string) {
  return widgetComponentFactory.getRequestComponent(type)
}

function getResponseComponent(type: string) {
  return widgetComponentFactory.getResponseComponent(type)
}
</script>
```

## å››ã€å®æ–½é¡ºåº

### ç¬¬ä¸€å‘¨ï¼šåŸºç¡€è®¾æ–½ + åŸºç¡€ç»„ä»¶

**Day 1-2**ï¼šåŸºç¡€è®¾æ–½æ­å»º
- âœ… åˆ›å»ºç›®å½•ç»“æ„
- âœ… åˆ›å»ºç±»å‹å®šä¹‰
- âœ… åˆ›å»º Pinia Store
- âœ… åˆ›å»ºç»„ä»¶å·¥å‚

**Day 3-5**ï¼šåŸºç¡€ç»„ä»¶å®ç°
- âœ… InputWidget
- âœ… SelectWidget
- âœ… NumberWidget
- âœ… FloatWidget
- âœ… TextAreaWidget
- âœ… SwitchWidget
- âœ… TimestampWidget
- âœ… FilesWidget

### ç¬¬äºŒå‘¨ï¼šå®¹å™¨ç»„ä»¶

**Day 6-8**ï¼šFormWidget ç»„ä»¶
- âœ… å®ç° FormWidget
- âœ… å®ç° useFormWidget composable
- âœ… æµ‹è¯•é€’å½’æ¸²æŸ“

**Day 9-12**ï¼šTableWidget ç»„ä»¶
- âœ… å®ç° TableWidget
- âœ… å®ç° useTableWidget composable
- âœ… å®ç° useTableEditMode composable
- âœ… å®ç° useTableResponseMode composable
- âœ… å®ç°èšåˆè®¡ç®—
- âœ… å®ç°è¯¦æƒ…æŠ½å±‰

### ç¬¬ä¸‰å‘¨ï¼šæ¸²æŸ“å™¨ + æµ‹è¯•

**Day 13-15**ï¼šFormRenderer ç»„ä»¶
- âœ… å®ç° FormRenderer
- âœ… é›†æˆæ‰€æœ‰ç»„ä»¶
- âœ… å®ç°æ¡ä»¶æ¸²æŸ“
- âœ… å®ç°è¡¨å•éªŒè¯
- âœ… å®ç°è¡¨å•æäº¤

**Day 16-18**ï¼šæµ‹è¯•
- âœ… åŠŸèƒ½æµ‹è¯•
- âœ… æ€§èƒ½æµ‹è¯•
- âœ… å…¼å®¹æ€§æµ‹è¯•

## äº”ã€éªŒæ”¶æ ‡å‡†

### 5.1 åŠŸèƒ½éªŒæ”¶

- âœ… æ‰€æœ‰åŸºç¡€ç»„ä»¶å¯ä»¥æ­£å¸¸æ¸²æŸ“
- âœ… æ‰€æœ‰å®¹å™¨ç»„ä»¶å¯ä»¥æ­£å¸¸æ¸²æŸ“
- âœ… æ”¯æŒæ·±å±‚åµŒå¥—ï¼ˆform > table > form > inputï¼‰
- âœ… æ¡ä»¶æ¸²æŸ“æ­£å¸¸å·¥ä½œ
- âœ… èšåˆè®¡ç®—æ­£å¸¸å·¥ä½œ
- âœ… è¡¨å•æäº¤æ•°æ®æå–æ­£å¸¸
- âœ… è¡¨å•éªŒè¯æ­£å¸¸

### 5.2 æ€§èƒ½éªŒæ”¶

- âœ… æ¸²æŸ“æ€§èƒ½ä¸ä½äºæ—§ç‰ˆæœ¬
- âœ… æ•°æ®æ›´æ–°æ€§èƒ½ä¸ä½äºæ—§ç‰ˆæœ¬
- âœ… å¤æ‚ç»„ä»¶æ ‘ï¼ˆ10å±‚åµŒå¥—ï¼‰å¯ä»¥æ­£å¸¸æ¸²æŸ“

### 5.3 ä»£ç è´¨é‡éªŒæ”¶

- âœ… TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
- âœ… ESLint æ£€æŸ¥é€šè¿‡
- âœ… ä»£ç è¦†ç›–ç‡ > 80%
- âœ… æ²¡æœ‰ console.log å’Œ debugger

## å…­ã€é£é™©æ§åˆ¶

### 6.1 æŠ€æœ¯é£é™©

**é£é™©**ï¼šæ–°ä»£ç å¯èƒ½æœ‰ bug

**ç¼“è§£æªæ–½**ï¼š
- å……åˆ†æµ‹è¯•
- é€æ­¥è¿ç§»
- ä¿ç•™æ—§ä»£ç ä½œä¸ºå›æ»šæ–¹æ¡ˆ

### 6.2 æ—¶é—´é£é™©

**é£é™©**ï¼šå¯èƒ½è¶…å‡ºé¢„æœŸæ—¶é—´

**ç¼“è§£æªæ–½**ï¼š
- åˆ†é˜¶æ®µå®æ–½
- ä¼˜å…ˆå®ç°æ ¸å¿ƒåŠŸèƒ½
- éæ ¸å¿ƒåŠŸèƒ½å¯ä»¥åç»­è¿­ä»£

### 6.3 å…¼å®¹æ€§é£é™©

**é£é™©**ï¼šå¯èƒ½ä¸ç°æœ‰åŠŸèƒ½ä¸å…¼å®¹

**ç¼“è§£æªæ–½**ï¼š
- æ–°æ—§ä»£ç å¹¶å­˜
- å¯ä»¥é€æ­¥åˆ‡æ¢
- å……åˆ†æµ‹è¯•

## ä¸ƒã€åç»­è®¡åˆ’

### 7.1 è¿ç§»è®¡åˆ’

1. **ç¬¬ä¸€é˜¶æ®µ**ï¼šæ–°ä»£ç ä¸æ—§ä»£ç å¹¶å­˜
2. **ç¬¬äºŒé˜¶æ®µ**ï¼šé€æ­¥åˆ‡æ¢ä½¿ç”¨æ–°ä»£ç 
3. **ç¬¬ä¸‰é˜¶æ®µ**ï¼šå®Œå…¨åˆ‡æ¢åˆ°æ–°ä»£ç 
4. **ç¬¬å››é˜¶æ®µ**ï¼šåˆ é™¤æ—§ä»£ç ï¼ˆå¯é€‰ï¼‰

### 7.2 ä¼˜åŒ–è®¡åˆ’

1. æ€§èƒ½ä¼˜åŒ–
2. ä»£ç ä¼˜åŒ–
3. æ–‡æ¡£å®Œå–„

## å…«ã€æ³¨æ„äº‹é¡¹

### 8.1 ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript
- éµå¾ª Vue 3 æœ€ä½³å®è·µ
- ä½¿ç”¨ç»„åˆå¼ API
- ä½¿ç”¨ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†

### 8.2 å‘½åè§„èŒƒ

- ç»„ä»¶æ–‡ä»¶ï¼š`PascalCase.vue`
- ç»„åˆå¼å‡½æ•°ï¼š`useCamelCase.ts`
- Store æ–‡ä»¶ï¼š`camelCase.ts`
- ç±»å‹æ–‡ä»¶ï¼š`types.ts`

### 8.3 æäº¤è§„èŒƒ

- æ¯ä¸ªé˜¶æ®µå®Œæˆåæäº¤
- æäº¤ä¿¡æ¯æ¸…æ™°
- åŒ…å«æµ‹è¯•ç”¨ä¾‹

## ä¹ã€å¼€å§‹å®æ–½

### 9.1 ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºç›®å½•ç»“æ„

```bash
cd web/src/core
mkdir -p widgets-v2/components
mkdir -p widgets-v2/composables
mkdir -p stores-v2
mkdir -p factories-v2
mkdir -p renderers-v2
```

### 9.2 ç¬¬äºŒæ­¥ï¼šåˆ›å»ºç±»å‹å®šä¹‰æ–‡ä»¶

å¼€å§‹åˆ›å»º `web/src/core/widgets-v2/types.ts`

### 9.3 ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º Pinia Store

å¼€å§‹åˆ›å»º `web/src/core/stores-v2/formData.ts` å’Œ `responseData.ts`

---

**å‡†å¤‡å¼€å§‹å®æ–½ï¼** ğŸš€

