# ç»„ä»¶æ¸²æŸ“ç³»ç»Ÿä½¿ç”¨æƒ…å†µåˆ†æ

## ğŸ“Š å½“å‰å®é™…æƒ…å†µ

### âœ… å·²è¿ç§»åˆ° widgets-v2 çš„åœºæ™¯

1. **FormRendererï¼ˆrenderers-v2ï¼‰**
   - **æ–‡ä»¶**ï¼š`web/src/core/renderers-v2/FormRenderer.vue`
   - **ä½¿ç”¨**ï¼š`widgetComponentFactory`ï¼ˆæ¥è‡ª `factories-v2`ï¼‰
   - **ç»„ä»¶**ï¼š`widgets-v2/components/*.vue`
   - **çŠ¶æ€**ï¼šâœ… å®Œå…¨ä½¿ç”¨æ–°ç‰ˆæœ¬

2. **FormDialog**
   - **æ–‡ä»¶**ï¼š`web/src/components/FormDialog.vue`
   - **ä½¿ç”¨**ï¼š`renderers-v2/FormRenderer.vue`
   - **çŠ¶æ€**ï¼šâœ… é—´æ¥ä½¿ç”¨æ–°ç‰ˆæœ¬ï¼ˆé€šè¿‡ FormRendererï¼‰

### âš ï¸ ä»åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬ widgets/ çš„åœºæ™¯

1. **TableRendererï¼ˆè¡¨æ ¼æ¸²æŸ“ï¼‰**
   - **æ–‡ä»¶**ï¼š`web/src/components/TableRenderer.vue`
   - **ä½¿ç”¨**ï¼š`WidgetBuilder.createTemporary()`ï¼ˆæ¥è‡ª `@/core/factories/WidgetBuilder`ï¼‰
   - **è°ƒç”¨æ–¹æ³•**ï¼š
     - `renderTableCell()` - æ¸²æŸ“è¡¨æ ¼å•å…ƒæ ¼
     - `renderForDetail()` - æ¸²æŸ“è¯¦æƒ…å±•ç¤º
   - **çŠ¶æ€**ï¼šâš ï¸ ä»åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬

2. **SearchInputï¼ˆæœç´¢è¾“å…¥ï¼‰**
   - **æ–‡ä»¶**ï¼š`web/src/components/SearchInput.vue`
   - **ä½¿ç”¨**ï¼š`WidgetBuilder.createTemporary()`ï¼ˆæ¥è‡ª `@/core/factories/WidgetBuilder`ï¼‰
   - **è°ƒç”¨æ–¹æ³•**ï¼š
     - `renderSearchInput()` - è·å–æœç´¢è¾“å…¥é…ç½®
   - **çŠ¶æ€**ï¼šâš ï¸ ä»åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬

## ğŸ¤” ä¸ºä»€ä¹ˆè¡¨æ ¼å’Œæœç´¢è¿˜åœ¨ç”¨æ—§ç‰ˆæœ¬ï¼Ÿ

### åŸå› åˆ†æ

1. **åŠŸèƒ½éœ€æ±‚ä¸åŒ**
   - **è¡¨å•æ¸²æŸ“**ï¼šéœ€è¦å®Œæ•´çš„è¡¨å•æ•°æ®ç®¡ç†ã€éªŒè¯ã€æäº¤ç­‰åŠŸèƒ½
   - **è¡¨æ ¼æ¸²æŸ“**ï¼šåªéœ€è¦æ¸²æŸ“å•å…ƒæ ¼ï¼ˆåªè¯»å±•ç¤ºï¼‰
   - **æœç´¢è¾“å…¥**ï¼šåªéœ€è¦è·å–è¾“å…¥é…ç½®ï¼ˆé…ç½®é©±åŠ¨ï¼‰

2. **æ—§ç‰ˆæœ¬çš„ä¼˜åŠ¿**
   - **ä¸´æ—¶ Widget**ï¼š`WidgetBuilder.createTemporary()` å¯ä»¥åˆ›å»ºæ—  formManager çš„ä¸´æ—¶ Widget
   - **æ–¹æ³•è°ƒç”¨**ï¼šç›´æ¥è°ƒç”¨ `renderTableCell()`ã€`renderSearchInput()` ç­‰æ–¹æ³•ï¼Œç®€å•ç›´æ¥
   - **è½»é‡çº§**ï¼šä¸éœ€è¦å®Œæ•´çš„è¡¨å•æ•°æ®ç®¡ç†

3. **æ–°ç‰ˆæœ¬çš„æŒ‘æˆ˜**
   - **ç»„ä»¶åŒ–**ï¼šwidgets-v2 æ˜¯ Vue ç»„ä»¶ï¼Œéœ€è¦ propsã€emit ç­‰
   - **è¡¨æ ¼å•å…ƒæ ¼**ï¼šéœ€è¦å°† Vue ç»„ä»¶æ¸²æŸ“ä¸ºè¡¨æ ¼å•å…ƒæ ¼å†…å®¹
   - **æœç´¢é…ç½®**ï¼šéœ€è¦ä» Vue ç»„ä»¶ä¸­æå–é…ç½®ä¿¡æ¯

## ğŸ’¡ æ˜¯å¦å¯ä»¥è¿ç§»ï¼Ÿ

### ç†è®ºä¸Šå¯ä»¥ï¼Œä½†éœ€è¦é€‚é…

#### æ–¹æ¡ˆ1ï¼šåˆ›å»ºé€‚é…å±‚
```typescript
// åˆ›å»ºé€‚é…å‡½æ•°ï¼Œå°† widgets-v2 ç»„ä»¶é€‚é…ä¸ºæ—§ç‰ˆæœ¬æ¥å£
function renderTableCellWithV2(field: FieldConfig, value: any) {
  // ä½¿ç”¨ widgets-v2 ç»„ä»¶æ¸²æŸ“
  const WidgetComponent = widgetComponentFactory.getComponent(field.widget?.type)
  // æ¸²æŸ“ä¸º VNode æˆ–å­—ç¬¦ä¸²
  return h(WidgetComponent, { field, value, mode: 'display' })
}
```

#### æ–¹æ¡ˆ2ï¼šç›´æ¥ä½¿ç”¨ widgets-v2 ç»„ä»¶
```vue
<!-- TableRenderer.vue -->
<template>
  <el-table-column>
    <template #default="{ row }">
      <component 
        :is="getWidgetComponent(field.widget?.type)"
        :field="field"
        :value="row[field.code]"
        mode="display"
      />
    </template>
  </el-table-column>
</template>
```

## ğŸ¯ å»ºè®®

### çŸ­æœŸï¼ˆä¿æŒç°çŠ¶ï¼‰
- âœ… **ç»§ç»­ä½¿ç”¨æ—§ç‰ˆæœ¬**ï¼šåŠŸèƒ½æ­£å¸¸ï¼Œä»£ç ç¨³å®š
- âœ… **ä¸¤å¥—ç³»ç»Ÿå¹¶è¡Œ**ï¼šè¡¨å•ç”¨æ–°ç‰ˆæœ¬ï¼Œè¡¨æ ¼/æœç´¢ç”¨æ—§ç‰ˆæœ¬

### ä¸­æœŸï¼ˆé€æ­¥è¿ç§»ï¼‰
1. **åˆ›å»ºé€‚é…å±‚**ï¼š
   - ä¸º widgets-v2 ç»„ä»¶åˆ›å»º `renderTableCell()` å’Œ `renderSearchInput()` æ–¹æ³•
   - æˆ–è€…åˆ›å»ºé€‚é…å‡½æ•°ï¼Œå°† widgets-v2 ç»„ä»¶é€‚é…ä¸ºæ—§ç‰ˆæœ¬æ¥å£

2. **è¿ç§» TableRenderer**ï¼š
   - å°†è¡¨æ ¼å•å…ƒæ ¼æ¸²æŸ“è¿ç§»åˆ°ä½¿ç”¨ widgets-v2 ç»„ä»¶
   - éœ€è¦å¤„ç† VNode æ¸²æŸ“å’Œå­—ç¬¦ä¸²æ¸²æŸ“

3. **è¿ç§» SearchInput**ï¼š
   - å°†æœç´¢è¾“å…¥é…ç½®è¿ç§»åˆ°ä½¿ç”¨ widgets-v2 ç»„ä»¶
   - éœ€è¦ä»ç»„ä»¶ä¸­æå–é…ç½®ä¿¡æ¯

### é•¿æœŸï¼ˆç»Ÿä¸€ç‰ˆæœ¬ï¼‰
- æ‰€æœ‰åœºæ™¯éƒ½ä½¿ç”¨ widgets-v2
- åˆ é™¤æ—§ç‰ˆæœ¬ widgets/ ç›®å½•

## ğŸ“ æ€»ç»“

**å½“å‰çŠ¶æ€**ï¼š
- âœ… è¡¨å•æ¸²æŸ“ï¼šå·²å®Œå…¨è¿ç§»åˆ° widgets-v2
- âš ï¸ è¡¨æ ¼æ¸²æŸ“ï¼šä»åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬ widgets/
- âš ï¸ æœç´¢è¾“å…¥ï¼šä»åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬ widgets/

**åŸå› **ï¼š
- æ—§ç‰ˆæœ¬æä¾›äº† `renderTableCell()` å’Œ `renderSearchInput()` ç­‰ä¸“é—¨çš„æ–¹æ³•
- è¿™äº›æ–¹æ³•é€‚åˆåªè¯»åœºæ™¯ï¼Œä¸éœ€è¦å®Œæ•´çš„è¡¨å•æ•°æ®ç®¡ç†
- æ–°ç‰ˆæœ¬æ˜¯ Vue ç»„ä»¶ï¼Œéœ€è¦é€‚é…æ‰èƒ½ç”¨äºè¿™äº›åœºæ™¯

**å»ºè®®**ï¼š
- æš‚æ—¶ä¿æŒç°çŠ¶ï¼ŒåŠŸèƒ½æ­£å¸¸
- åç»­å¯ä»¥åˆ›å»ºé€‚é…å±‚ï¼Œé€æ­¥è¿ç§»åˆ° widgets-v2

